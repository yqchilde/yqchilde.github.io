import{_ as p}from"./chunks/articleMetadata.-WFpoTxv.js";import{_ as h,C as r,c as o,o as e,j as t,G as d,az as F,a as g,w as c,b as u,e as f}from"./chunks/framework.B5MS1KJz.js";import"./chunks/theme.CnTPM46A.js";const y="/assets/1758706351.B-5j_qJN.png",C="/assets/1758706352.GxsQPWcT.png",m="/assets/1758706353.9505N1Uw.png",B="/assets/1758706354.DNoFHEp5.png",x=JSON.parse('{"title":"使用confluent-kafka-go包遇到的cgo问题","description":"解决windows环境编译confluent-kafka-go包","frontmatter":{"title":"使用confluent-kafka-go包遇到的cgo问题","description":"解决windows环境编译confluent-kafka-go包","date":"2025-09-23T21:54:35.000Z","tags":["Kafka"]},"headers":[],"relativePath":"blog/2025/confluent-kafka-go-cgo-build.md","filePath":"posts/blog/2025/3-confluent-kafka-go-cgo-build/README.md","lastUpdated":1762005690000}'),b={name:"blog/2025/confluent-kafka-go-cgo-build.md"};function E(a,s,_,v,w,A){const l=p,k=r("ClientOnly");return e(),o("div",null,[s[0]||(s[0]=t("h1",{id:"使用confluent-kafka-go包遇到的cgo问题",tabindex:"-1"},[g("使用confluent-kafka-go包遇到的cgo问题 "),t("a",{class:"header-anchor",href:"#使用confluent-kafka-go包遇到的cgo问题","aria-label":'Permalink to "使用confluent-kafka-go包遇到的cgo问题"'},"​")],-1)),d(k,null,{default:c(()=>{var i,n;return[(((i=a.$frontmatter)==null?void 0:i.aside)??!0)&&(((n=a.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(e(),u(l,{key:0,article:a.$frontmatter},null,8,["article"])):f("",!0)]}),_:1}),s[1]||(s[1]=F(`<p>最近项目里用了<code>confluent-kafka-go</code>这个包，在编译时遇到一些问题，我的环境是Windows，报错如下：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:11:21:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Producer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:15:18:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.NewProducer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:15:37:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.ConfigMap</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:32:16:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Message</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:37:15:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Error</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:47:24:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Message</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:48:26:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.TopicPartition</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:48:73:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.PartitionAny</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:62:36:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Message</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:63:25:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undefined:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.TopicPartition</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.go:63:25:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> too</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> many</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> errors</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这是由于未开启CGO编译，只需要在设置<code>CGO_ENABLED=1</code>即可，然后又遇到如下问题：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># runtime/cgo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cgo:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compiler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gcc&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gcc&quot;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> executable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %PATH%</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这是由于本机没有gcc环境，接下来写一下安装gcc环境，打开<a href="https://msys2.org" target="_blank" rel="noreferrer">msys2.org</a>进行下载</p><p><img src="`+y+'" alt="img" loading="lazy"></p><p><img src="'+C+'" alt="img" loading="lazy"></p><p><img src="'+m+'" alt="img" loading="lazy"></p><p><img src="'+B+'" alt="img" loading="lazy"></p><p>配置好gcc环境后，就可以成功编译了</p>',10))])}const D=h(b,[["render",E]]);export{x as __pageData,D as default};
