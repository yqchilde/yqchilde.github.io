import{_ as t}from"./chunks/articleMetadata.CvuvuElp.js";import{_ as o,m as c,a as r,u as d,B as h,e as n,x as k,aj as m,o as i,p as F,q as b}from"./chunks/framework.BKaFImy5.js";import"./chunks/theme.CgHAVGdM.js";const u="/assets/20210313150914.y-znxyTX.png",g="/assets/20210313151336.B_ZbNdwZ.png",v="/assets/20210313151938.BztTzxnR.png",D=JSON.parse('{"title":"docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨","description":"è®°å½•åœ¨docker-composeä¸­å¯¹ç¯å¢ƒå˜é‡æŠ½ç¦»ï¼Œä½¿ç”¨envæ–‡ä»¶åµŒå¥—å˜é‡ä½¿ç”¨çš„æ–¹æ³•ã€‚","frontmatter":{"title":"docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨","description":"è®°å½•åœ¨docker-composeä¸­å¯¹ç¯å¢ƒå˜é‡æŠ½ç¦»ï¼Œä½¿ç”¨envæ–‡ä»¶åµŒå¥—å˜é‡ä½¿ç”¨çš„æ–¹æ³•ã€‚","date":"2021-03-13T12:49:58.000Z","tags":["Docker"]},"headers":[],"relativePath":"blog/2021/docker-compose-env-file.md","filePath":"posts/blog/2021/docker-compose-env-file/README.md","lastUpdated":1714128681000}'),C={name:"blog/2021/docker-compose-env-file.md"},_=n("h1",{id:"docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨",tabindex:"-1"},[k("docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨ "),n("a",{class:"header-anchor",href:"#docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨","aria-label":'Permalink to "docker-composeä½¿ç”¨envå¤„ç†ç¯å¢ƒå˜é‡å¦™ç”¨"'},"â€‹")],-1),y=m('<div class="tip custom-block"><p class="custom-block-title">èƒŒæ™¯</p><p>æœ€è¿‘åœ¨ç”¨çš„ä¸€ä¸ªæœåŠ¡ä»–çš„docker-composeéœ€è¦é…ç½®å¾ˆå¤šå¾ˆå¤šçš„ç¯å¢ƒå˜é‡ï¼Œè€Œæ¯ä¸ªç¯å¢ƒå˜é‡å¯èƒ½åˆå¾ˆé•¿ï¼Œæ‰€ä»¥æŸ¥é˜…èµ„æ–™äº†è§£åˆ°env fileè¿™ç§é…ç½®</p></div><h2 id="env-file" tabindex="-1">env_file <a class="header-anchor" href="#env-file" aria-label="Permalink to &quot;env_file&quot;">â€‹</a></h2><p>å®˜æ–¹æ–‡æ¡£åœ°å€ <a href="https://docs.docker.com/compose/environment-variables" target="_blank" rel="noreferrer">https://docs.docker.com/compose/environment-variables</a>ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œå¦‚æœè¦ä½¿ç”¨env_fileé…ç½®ï¼Œè¿™æ—¶å€™ï¼Œæ˜¯ä¼šæŠŠæ‰€æœ‰çš„å˜é‡éƒ½å¸¦å…¥è¿›æ¥çš„ï¼Œæˆ‘ä¸éœ€è¦é‚£ä¹ˆå¤šå˜é‡ï¼Œä¸¾ä¸ªğŸŒ°</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># äº¬ä¸œå†œåœº</span></span>\n<span class="line"><span>FRUIT1=0f6f68f0d58d43a98d2f578a7e1a0215</span></span>\n<span class="line"><span>FRUIT2=8e2785b15cef4f03a714f4288a496dec</span></span>\n<span class="line"><span>FRUIT3=c8f3876f3ea24dedbb174868ad53e4d2</span></span>\n<span class="line"><span>FRUIT4=667ebac5844e418d98393004362eb28s</span></span>\n<span class="line"><span>FRUIT5=dad356ebad9a4de6ab8fdd774b2ea94g</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>FRUIT_SHARECODE1=${FRUIT2}@${FRUIT3}@${FRUIT4}@${FRUIT5}</span></span>\n<span class="line"><span>FRUIT_SHARECODE2=${FRUIT1}@${FRUIT3}@${FRUIT4}@${FRUIT5}</span></span>\n<span class="line"><span>FRUIT_SHARECODE3=${FRUIT1}@${FRUIT2}@${FRUIT4}@${FRUIT5}</span></span>\n<span class="line"><span>FRUIT_SHARECODE4=${FRUIT1}@${FRUIT2}@${FRUIT3}@${FRUIT5}</span></span>\n<span class="line"><span>FRUIT_SHARECODE5=${FRUIT1}@${FRUIT2}@${FRUIT3}@${FRUIT4}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>.env</code>æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µå†…å®¹ï¼Œå…¶ä¸­ <code>FRUIT1-5</code> å’Œ <code>FRUIT_SHARECODE1-5</code>å…¨æ˜¯å˜é‡ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶æˆ‘åªè¦æƒ³ <code>FRUIT_SHARECODE1-5</code>çš„å˜é‡ï¼Œä¸æƒ³è¦ä¸Šé¢çš„ï¼Œå¯ä»¥è¯´æ˜¯æˆ‘éœ€è¦æŒ‰éœ€å¼•å…¥å˜é‡ï¼Œå¦‚æœç›´æ¥ç”¨å¦‚ä¸‹è¿™ç§é…ç½®ï¼Œå°±ä¼šå°†æ‰€æœ‰çš„å˜é‡å…¨éƒ¨å¼•å…¥</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-compose.yml</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;3&#39;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">services:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  api:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:6-alpine&#39;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    env_file:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./api.env</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰€ä»¥æœ€ç»ˆæƒ³æ³•è¿˜æ˜¯åªåœ¨åŒç›®å½•ç”¨ <code>.env</code> æ–‡ä»¶ï¼Œè¿™æ ·ä¸éœ€è¦ç‰¹åˆ«å£°æ˜å¼•å…¥ï¼Œåªéœ€è¦ä¿è¯åŒç›®å½•å³å¯ï¼Œè¿™æ—¶å€™æˆ‘åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å¼•å…¥äº† <code>FRUIT_SHARECODE1</code> å˜é‡ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£æ˜¯å˜é‡åµŒå¥—ä¼šé—´æ¥å¼•å…¥ä¸Šé¢çš„å˜é‡ï¼Œç»“æœå˜æˆäº†ä¸‹é¢è¿™ä¸ªæ ·å­ã€‚</p><p><img src="'+u+'" alt="img" title="å›¾1" loading="lazy"></p><p>éš¾é“docker-composeä¸æ”¯æŒè¿™ç§å†™æ³•ï¼Ÿè¿˜è¢«å¤šåŠ äº†ä¸€ä¸ª <code>$</code>å˜æˆäº† <code>$${}</code> ï¼Œéšååœ¨è‡ªå·±çš„æœ¬åœ°ç”µè„‘è¯•äº†ä¸‹ï¼Œæ˜¯æŒ‰ç…§æˆ‘é¢„æƒ³çš„ç»“æœè¾“å‡ºçš„ï¼Œé‚£ä¹ˆé—®é¢˜å°±å¥½è¯´äº†ï¼Œè¿™è¯´æ˜æ˜¯dockerc-composeç‰ˆæœ¬ä¸å¯¹ï¼Œå¹¶ä¸æ˜¯ä¸æ”¯æŒï¼Œå½“å‰æœåŠ¡å™¨ä¸‹çš„ç‰ˆæœ¬æ˜¯ 1.25.4ï¼Œç¿»é˜…ç‰ˆæœ¬è®°å½•å‘ç°åœ¨ 1.26.0 ä»¥åä½¿ç”¨äº† <code>python-dotenv</code> ç®¡ç†äº†env_fileï¼Œæ‰€ä»¥è‡³å°‘è¦ä½¿ç”¨å¤§äº1.26.0ä»¥åçš„ç‰ˆæœ¬ã€‚</p><p><img src="'+g+'" alt="img" title="å›¾2" loading="lazy"></p><p>é¡ºä¾¿æä¸€ä¸‹æ›´æ–° <code>docker-compose</code>ç‰ˆæœ¬æ­¥éª¤</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> whereis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-compose</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/docker-compose</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®°å¾—åé¢ä¿å­˜çš„ä½ç½®æ˜¯åŸæ¥çš„ä½ç½®</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/docker-compose</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ›´æ–°ä¹‹åå†çœ‹ä¸€ä¸‹æ•ˆæœå§</p><p><img src="'+v+'" alt="img" title="å›¾ä¸‰" loading="lazy"></p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>docker-composeå¾ˆæ–¹ä¾¿ï¼Œä½¿ç”¨ <code>.env</code> æ–‡ä»¶ä¼šæ›´åŠ æ–¹ä¾¿ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä¼ é€’æ›´å¤šçš„å†…å®¹è¿›æ¥ï¼Œæ¯æ¬¡åªéœ€è¦ç»´æŠ¤ <code>.env</code> ä¸ç”¨é¢‘ç¹ä¿®æ”¹ <code>docker-compose.yml</code> ã€‚</p>',16);function R(s,T,f,B,E,I){const p=t,l=c("ClientOnly");return i(),r("div",null,[_,d(l,null,{default:h(()=>{var a,e;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((e=s.$frontmatter)==null?void 0:e.showArticleMetadata)??!0)?(i(),F(p,{key:0,article:s.$frontmatter},null,8,["article"])):b("",!0)]}),_:1}),y])}const S=o(C,[["render",R]]);export{D as __pageData,S as default};
