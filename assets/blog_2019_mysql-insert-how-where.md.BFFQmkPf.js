import{_ as h}from"./chunks/articleMetadata.BhXtFNNY.js";import{_ as p,h as k,u as r,B as E,l as n,x as d,ai as o,m as g,f as t,p as c,q as y}from"./chunks/framework.KEtiH2AC.js";import"./chunks/theme.DpQcp01s.js";const S=JSON.parse('{"title":"MySQLä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶","description":"è®°å½•ä¸€ä¸‹MySQLåœ¨åšæ’å…¥æ“ä½œæ—¶æ€ä¹ˆå»æŒ‡å®šæ¡ä»¶","frontmatter":{"title":"MySQLä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶","description":"è®°å½•ä¸€ä¸‹MySQLåœ¨åšæ’å…¥æ“ä½œæ—¶æ€ä¹ˆå»æŒ‡å®šæ¡ä»¶","date":"2019-10-26T14:25:53.000Z","tags":["MySQL"]},"headers":[],"relativePath":"blog/2019/mysql-insert-how-where.md","filePath":"posts/blog/2019/mysql-insert-how-where/README.md","lastUpdated":1713953919000}'),m={name:"blog/2019/mysql-insert-how-where.md"},F=n("h1",{id:"mysqlä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶",tabindex:"-1"},[d("MySQLä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶ "),n("a",{class:"header-anchor",href:"#mysqlä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶","aria-label":'Permalink to "MySQLä¸­insertæ•°æ®æ—¶æ€ä¹ˆç”¨whereæ¡ä»¶"'},"â€‹")],-1),u=o(`<div class="tip custom-block"><p class="custom-block-title">èƒŒæ™¯</p><p>åœ¨ä¹‹å‰å†™PHPä¸­æƒ³å»æ·»åŠ ä¸€æ¡æ•°æ®ï¼Œå¹¶ä¸”æƒ³æŸ¥è¯¢æ˜¯å¦åœ¨æ’å…¥ä¹‹å‰æœ‰è¿™æ¡æ•°æ®ï¼Œæˆ‘ä¼šæ²™é›•çš„åšæ³•ï¼ˆemmm,ä¹‹å‰æˆ‘ä¸çŸ¥é“æˆ‘è¿™ä¹ˆæ²™é›•äº†ï¼‰å°±æ˜¯å†™ä¸¤ä¸ªsqlè¯­å¥ï¼Œåˆ†åˆ«è®©ä»–ä»¬å»å•ç‹¬æ‰§è¡ŒğŸ˜ª</p></div><p>ç®€å•ç‚¹å¾—ä¸€å¥sqlè¯­å¥ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è¡¨å(å­—æ®µä¸€,å­—æ®µäºŒ) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;å­—æ®µå€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å­—æ®µå€¼&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DUAL </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	WHERE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æ•°æ® </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è¡¨å </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æ¡ä»¶)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¾‹å¦‚ ï¼š</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">insert into</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tb(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,age) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fox&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DUAL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fox&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>DUAL æ˜¯è™šæ‹Ÿè¡¨ä¸ºäº†æ»¡è¶³ select ...from .....æ ¼å¼</p></blockquote><h2 id="_2019-10-2è¡¥å……" tabindex="-1">2019/10/2è¡¥å…… <a class="header-anchor" href="#_2019-10-2è¡¥å……" aria-label="Permalink to &quot;2019/10/2è¡¥å……&quot;">â€‹</a></h2><p>ç°åœ¨åœ¨ç”¨Golangå†™webä¸šåŠ¡ï¼Œè¡¥å……ä¸€ä¸‹ä¹‹å‰çš„ä¾‹å­å§</p><div class="language-go vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// UserAdd æ·»åŠ ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	tx, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Begin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	result, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;insert into user(num,name,pass,phone,email,ctime) SELECT ?,?,?,?,?,? from DUAL where ? NOT IN ( SELECT \`num\` FROM USER )&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mod.Num, mod.Name, mod.Pass, mod.Phone, mod.Email, mod.Ctime, mod.Num)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		tx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Rollback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	rows, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RowsAffected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		tx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Rollback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rows affected &lt; 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	tx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Commit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºæ¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­numå­—æ®µæ—¶å€™å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨æƒ…å†µä¸‹å°±ä¼šè¿”å›Affected rows: 0</strong></p><p><strong>Soåˆ¤æ–­RowsAffectedå°±è¡Œï¼Œä¸å­˜åœ¨å°±ç›´æ¥æ’å…¥äº†</strong></p>`,11);function b(s,A,D,C,_,f){const e=h,l=g("ClientOnly");return t(),k("div",null,[F,r(l,null,{default:E(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(t(),c(e,{key:0,article:s.$frontmatter},null,8,["article"])):y("",!0)]}),_:1}),u])}const q=p(m,[["render",b]]);export{S as __pageData,q as default};
